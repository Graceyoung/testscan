(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b98d0d2","chunk-34200202"],{"3ab4":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper scrollBar"},[a("div",{staticClass:"header"},[a("i",{staticClass:"el-icon-arrow-left",on:{click:t.backFun}})]),a("div",{staticClass:"content"},[a("img",{attrs:{src:i("e9aa")}}),t._m(0),a("div",{staticClass:"block"},[a("div",{staticClass:"block-item"},[a("label",[t._v("追溯码编号")]),a("div",{staticClass:"input-view"},[t._v(t._s(t.query.traceCode||""))])]),a("div",{staticClass:"block-item"},[a("label",[t._v("商品名称")]),a("div",{staticClass:"input-view"},[t._v(t._s(t.info.commodityName||""))])]),a("div",{staticClass:"block-item"},[a("label",[t._v("商品批次号")]),a("div",{staticClass:"input-view"},[t._v(t._s(t.info.batchNumber||""))])]),a("div",{staticClass:"block-item"},[a("label",[t._v("包装规格(cm)")]),a("div",{staticClass:"input-view"},[t._v(t._s(null==t.info.packageSpecifications?"":t.info.packageSpecifications+"(L*W*H)"))])]),a("div",{staticClass:"block-item"},[a("label",[t._v("生产批次号")]),a("div",{staticClass:"input-view"},[t._v(t._s(t.info.productionBatchNumber))])]),a("div",{staticClass:"block-item"},[a("label",[t._v("生产日期")]),a("div",{staticClass:"input-view"},[t._v(t._s(t.getDate(t.info.manufactureDate)))])]),a("div",{staticClass:"block-item"},[a("label",[t._v("保质期(月)")]),a("div",{staticClass:"input-view"},[t._v(t._s(null!=t.info.shelfLife?t.info.shelfLife+"个月":""))])])]),t._m(1),a("div",{staticClass:"block"},[a("div",{staticClass:"block-item"},[a("label",[t._v("检验检疫证明证书编号")]),a("div",{staticClass:"input-view"},[t._v(t._s(t.info.certificateNo||""))])]),a("div",{staticClass:"block-item"},[a("label",[t._v("产品名称")]),a("div",{staticClass:"input-view"},[t._v(t._s(t.info.productName||""))])]),a("div",{staticClass:"block-item"},[a("label",[t._v("产品分类大类")]),a("div",{staticClass:"input-view"},[t._v(t._s(t.query.productType||""))])]),a("div",{staticClass:"block-item"},[a("label",[t._v("生产批次号")]),a("div",{staticClass:"input-view"},[t._v(t._s(t.info.checkProductionBatchNumber||""))])]),a("div",{staticClass:"block-item"},[a("label",[t._v("产品HS编码")]),a("div",{staticClass:"input-view"},[t._v(t._s(t.info.productHsNumber||""))])]),a("div",{staticClass:"block-item"},[a("label",[t._v("包装种类")]),a("div",{staticClass:"input-view"},[t._v(t._s(t.info.typeQuantity||""))])]),a("div",{staticClass:"block-item"},[a("label",[t._v("入境日期")]),a("div",{staticClass:"input-view"},[t._v(t._s(t.getDate(t.info.entryDate)))])]),a("div",{staticClass:"block-item"},[a("label",[t._v("输出国家或地区")]),a("div",{staticClass:"input-view"},[t._v(t._s(t.info.countryArea||""))])]),a("div",{staticClass:"block-item"},[a("label",[t._v("入境口岸")]),a("div",{staticClass:"input-view"},[t._v(t._s(t.info.entryPort||""))])])]),t._m(2),a("div",{staticClass:"block node-info"},[t._m(3),a("div",{staticClass:"block-main"},t._l(t.nodeList,(function(e,i){return a("div",{key:i,staticClass:"item",class:{active:t.currNode.id===e.id}},[i!==t.nodeList.length-1?a("div",{staticClass:"block-line"}):t._e(),a("div",{staticClass:"block-icon-wrap"},[t.currNode.id===e.id?a("i",{staticClass:"block-icon el-icon-check"}):a("span",{staticClass:"block-icon"},[t._v(t._s(i+1))])]),a("span",{staticClass:"name",on:{click:function(i){return t.selectFun(e)}}},[t._v(t._s(e.ownerName))])])})),0)]),a("div",{staticClass:"block node-info margin"},[t._m(4),a("div",{staticClass:"block-item"},[a("label",[t._v("车牌号码")]),a("div",{staticClass:"input-view"},[t._v(t._s(t.currNode.distributionCarNumber||""))])]),a("div",{staticClass:"block-item"},[a("label",[t._v("平均温度")]),a("div",{staticClass:"input-view"},[t._v(t._s(null==t.currNode.distributionTemperature||""===t.currNode.distributionTemperature?"":t.currNode.distributionTemperature+"℃"))])]),a("div",{staticClass:"block-item"},[a("label",[t._v("入库时间")]),a("div",{staticClass:"input-view"},[t._v(t._s(t.currNode.warehouseTime))])]),a("div",{staticClass:"block-item"},[a("label",[t._v("仓库名称")]),a("div",{staticClass:"input-view"},[t._v(t._s(t.currNode.storageWarehouseName))])]),a("div",{staticClass:"block-item"},[a("label",[t._v("库存温度")]),a("div",{staticClass:"input-view"},[t._v(t._s(null==t.currNode.storageTemperature||""===t.currNode.storageTemperature?"":t.currNode.storageTemperature+"℃"))])]),a("div",{staticClass:"block-item"},[a("label",[t._v("出库时间")]),a("div",{staticClass:"input-view"},[t._v(t._s(t.currNode.deliveryTime))])]),a("div",{staticClass:"block-item"},[a("label",[t._v("收货方名称")]),a("div",{staticClass:"input-view"},[t._v(t._s(t.currNode.receiveName||""))])])]),a("div",{staticClass:"block node-info margin"},[t._m(5),a("div",{staticClass:"block-main"},t._l(t.currNode.files||[],(function(e,i){return a("div",{key:i,staticClass:"file-item",on:{click:function(i){return t.downloadFun(e)}}},[t._v(" "+t._s(e.name)+" ")])})),0)])])])},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"title"},[i("div",{staticClass:"title-text"},[t._v("商品信息")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"title"},[i("div",{staticClass:"title-text"},[t._v("检验检疫信息")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"title"},[i("div",{staticClass:"title-text"},[t._v("商品流通信息")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"block-top"},[i("span",{staticClass:"name"},[t._v("节点信息")]),i("span",{staticClass:"tip"},[t._v("（点击公司名称，可切换信息）")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"block-top"},[i("span",{staticClass:"name"},[t._v("流通信息")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"block-top"},[i("span",{staticClass:"name"},[t._v("检测证书")]),i("span",{staticClass:"tip"},[t._v("（点击证书名称，可查看详情）")])])}],l=(i("b0c0"),i("276c")),n=i("e954"),c=i("e1a7"),o=i("f20d"),r=i("920b"),u=i("9ab4"),d=i("60a3"),v=i("79f6"),f=i("56d6"),p=i("813a"),m=i("c1df"),_=i.n(m),b=function(t){function e(){var t;return Object(l["a"])(this,e),t=Object(c["a"])(this,Object(o["a"])(e).apply(this,arguments)),t.info={},t.nodeList=[],t.currNode={},t.activeName=[],t.query={},t}return Object(r["a"])(e,t),Object(n["a"])(e,[{key:"created",value:function(){var t=this.$route.query||{};this.query.traceCode=t.traceCode,this.query.traceCode&&this.searchFun()}},{key:"getDate",value:function(t){return null==t||""===t?"-":_()(t).format("YYYY年MM月DD日")}},{key:"downloadFun",value:function(t){Object(f["a"])("/trace-web/file/download",{path:t.path||t.address,fileName:t.name})}},{key:"backFun",value:function(){this.$emit("backEvent")}},{key:"selectFun",value:function(t){this.currNode.id!=t.id&&(this.currNode=t)}},{key:"searchFun",value:function(){var t=this;v["b"].trace_web_traceCodeQuery_getByTraceCodeNotLogin_post({data:{traceCode:this.query.traceCode}}).then((function(e){var i=e.data||{};t.info=i,i.inflowType&&(t.info.inflowType=i.inflowType.disName),i.inspectionExemption&&(t.info.inspectionExemption=i.inspectionExemption.disName),i.origin&&(t.info.origin=i.origin.disName),i.storageType&&(t.info.storageType=i.storageType.disName),t.nodeList=t.info.codeCirculationVos||[],t.currNode=t.nodeList[0]||{}}))}}]),e}(d["d"]);b=u["a"]([Object(d["a"])({name:"Index",components:{scan:p["default"]}})],b);var C=b,h=C,k=(i("a0aa"),i("2877")),w=Object(k["a"])(h,a,s,!1,null,"d932c914",null);e["default"]=w.exports},"43a8":function(t,e,i){},"4e79":function(t,e,i){"use strict";var a=i("fff6"),s=i.n(a);s.a},"813a":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"module-content"},[i("select-file",{attrs:{showFileList:!1,accept:"image/*",outFiles:t.tempFile},on:{"update:outFiles":function(e){t.tempFile=e},"update:out-files":function(e){t.tempFile=e}}},[i("span",{on:{click:t.clickFun}},[t._v("相册")])]),i("canvas",{staticStyle:{display:"none"},attrs:{id:"myCanvas",width:"600",height:"600"}}),i("tip",{ref:"tip"})],1)},s=[],l=(i("d3b7"),i("96cf"),i("276c")),n=i("e954"),c=i("e1a7"),o=i("f20d"),r=i("920b"),u=i("9ab4"),d=i("60a3"),v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-file",class:t.disabled?"disabled":""},[t.disabled?t._e():i("el-upload",{attrs:{"before-upload":t.handleUpload,accept:t.accept,multiple:t.multiple,drag:t.drag,action:"//localhost"},nativeOn:{click:function(e){return t.onClick(e)}}},[t._t("default",[i("el-button",{staticClass:"btn",attrs:{type:"primary",icon:"ios-link"}},[t._v(t._s(t.title))])])],2),t.showFileList?i("div",{staticClass:"file-list"},t._l(t.showFileShow,(function(e,a){return i("div",{key:a,staticClass:"file-item",on:{click:function(i){return t.download(e)}}},[i("i",{staticClass:"el-icon-link"}),t._v(" "+t._s(e.name)+" "),!t.disabled&&t.isShowDel?i("i",{staticClass:"el-icon-close",staticStyle:{color:"#CC0000"},on:{click:function(i){return i.stopPropagation(),t.removeFile(e)}}}):t._e()])})),0):t._e()],1)},f=[],p=(i("99af"),i("c975"),i("a434"),i("a9e3"),i("d0ff")),m={name:"selectFile",props:{title:{type:String,default:"上传附件"},accept:{type:String},showFileList:{type:Boolean,default:!0},outFiles:[File,Array],inFiles:{type:Array,default:function(){return[]}},delInFiles:{type:Array,default:function(){return[]}},isDownload:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},drag:{type:Boolean,default:!1},isShowDel:{type:Boolean,default:!0},disabled:Boolean,maxSize:{type:Number,default:null},tipDesc:{type:String,default:null}},data:function(){return{fileList:[]}},computed:{showFileShow:function(){return!this.multiple&&this.fileList.length?Object(p["a"])(this.fileList):[].concat(Object(p["a"])(this.inFiles),Object(p["a"])(this.fileList))}},methods:{onClick:function(){this.multiple||(this.fileList=[])},download:function(t){this.$emit("click-file-name",t),this.isDownload&&File},removeFile:function(t){if(t instanceof File){var e=this.fileList;e.splice(e.indexOf(t),1)}else{var i=this.inFiles;i.splice(i.indexOf(t),1),this.delInFiles.push(t),this.$emit("update:delInFiles",this.delInFiles)}},handleUpload:function(t){var e=t.size/1024;return this.maxSize&&e>this.maxSize?(console.log(this.tipDesc),this.$message({message:this.tipDesc||"照片大小不能超过".concat(this.maxSize/1024,"M"),type:"warning"}),!1):(this.fileList.push(t),!1)},clearFiles:function(){this.fileList=[]}},watch:{fileList:function(t){this.multiple?this.$emit("update:outFiles",t):this.$emit("update:outFiles",t[0])}}},_=m,b=(i("4e79"),i("2877")),C=Object(b["a"])(_,v,f,!1,null,"6dc2e50e",null),h=C.exports,k=i("ecec"),w=i.n(k),y=i("05eb"),g=function(t){function e(){var t;return Object(l["a"])(this,e),t=Object(c["a"])(this,Object(o["a"])(e).apply(this,arguments)),t.traceCode=null,t.tempFile=null,t}return Object(r["a"])(e,t),Object(n["a"])(e,[{key:"clickFun",value:function(){this.$emit("on-close")}},{key:"watchtempFile",value:function(t){t&&this.beforeAvatarUpload(t)}},{key:"analysisQrcode",value:function(t){return new Promise((function(e){var i=new Image,a=new FileReader;a.readAsDataURL(t),a.onload=function(t){i.src=t.target.result;var a=document.getElementById("myCanvas"),s=a.getContext("2d");i.onload=function(){s.drawImage(i,0,0,600,600);var t=s.getImageData(0,0,600,600),a={qrcode:"",isqrcode:!0};a.qrcode=w()(t.data,t.width,t.height,{inversionAttempts:"dontInvert"}),null==a.qrcode&&(a.isqrcode=!1),e(a)}}}))}},{key:"beforeAvatarUpload",value:function(t){var e,i;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.analysisQrcode(t));case 2:e=a.sent,console.log(e),i=e.qrcode&&e.qrcode.data,""!==i&&null!=i?this.$emit("on-scan",i):this.$refs.tip.warning("识别失败，请检查二维码是否正确！");case 6:case"end":return a.stop()}}),null,this)}}]),e}(d["d"]);u["a"]([Object(d["e"])("tempFile",{deep:!0})],g.prototype,"watchtempFile",null),g=u["a"]([Object(d["a"])({components:{SelectFile:h,tip:y["default"]}})],g);var F=g,N=F,O=Object(b["a"])(N,a,s,!1,null,"361178de",null);e["default"]=O.exports},a0aa:function(t,e,i){"use strict";var a=i("43a8"),s=i.n(a);s.a},e9aa:function(t,e,i){t.exports=i.p+"img/banner.17085cda.png"},fff6:function(t,e,i){}}]);
//# sourceMappingURL=chunk-0b98d0d2.f21bc7ff.js.map