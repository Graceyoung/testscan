(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34200202"],{"4e79":function(e,t,i){"use strict";var n=i("fff6"),l=i.n(n);l.a},"813a":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"module-content"},[i("select-file",{attrs:{showFileList:!1,accept:"image/*",outFiles:e.tempFile},on:{"update:outFiles":function(t){e.tempFile=t},"update:out-files":function(t){e.tempFile=t}}},[i("span",{on:{click:e.clickFun}},[e._v("相册")])]),i("canvas",{staticStyle:{display:"none"},attrs:{id:"myCanvas",width:"600",height:"600"}}),i("tip",{ref:"tip"})],1)},l=[],a=(i("d3b7"),i("96cf"),i("276c")),s=i("e954"),o=i("e1a7"),c=i("f20d"),r=i("920b"),u=i("9ab4"),d=i("60a3"),f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"upload-file",class:e.disabled?"disabled":""},[e.disabled?e._e():i("el-upload",{attrs:{"before-upload":e.handleUpload,accept:e.accept,multiple:e.multiple,drag:e.drag,action:"//localhost"},nativeOn:{click:function(t){return e.onClick(t)}}},[e._t("default",[i("el-button",{staticClass:"btn",attrs:{type:"primary",icon:"ios-link"}},[e._v(e._s(e.title))])])],2),e.showFileList?i("div",{staticClass:"file-list"},e._l(e.showFileShow,(function(t,n){return i("div",{key:n,staticClass:"file-item",on:{click:function(i){return e.download(t)}}},[i("i",{staticClass:"el-icon-link"}),e._v(" "+e._s(t.name)+" "),!e.disabled&&e.isShowDel?i("i",{staticClass:"el-icon-close",staticStyle:{color:"#CC0000"},on:{click:function(i){return i.stopPropagation(),e.removeFile(t)}}}):e._e()])})),0):e._e()],1)},p=[],h=(i("99af"),i("c975"),i("a434"),i("a9e3"),i("d0ff")),m={name:"selectFile",props:{title:{type:String,default:"上传附件"},accept:{type:String},showFileList:{type:Boolean,default:!0},outFiles:[File,Array],inFiles:{type:Array,default:function(){return[]}},delInFiles:{type:Array,default:function(){return[]}},isDownload:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},drag:{type:Boolean,default:!1},isShowDel:{type:Boolean,default:!0},disabled:Boolean,maxSize:{type:Number,default:null},tipDesc:{type:String,default:null}},data:function(){return{fileList:[]}},computed:{showFileShow:function(){return!this.multiple&&this.fileList.length?Object(h["a"])(this.fileList):[].concat(Object(h["a"])(this.inFiles),Object(h["a"])(this.fileList))}},methods:{onClick:function(){this.multiple||(this.fileList=[])},download:function(e){this.$emit("click-file-name",e),this.isDownload&&File},removeFile:function(e){if(e instanceof File){var t=this.fileList;t.splice(t.indexOf(e),1)}else{var i=this.inFiles;i.splice(i.indexOf(e),1),this.delInFiles.push(e),this.$emit("update:delInFiles",this.delInFiles)}},handleUpload:function(e){var t=e.size/1024;return this.maxSize&&t>this.maxSize?(console.log(this.tipDesc),this.$message({message:this.tipDesc||"照片大小不能超过".concat(this.maxSize/1024,"M"),type:"warning"}),!1):(this.fileList.push(e),!1)},clearFiles:function(){this.fileList=[]}},watch:{fileList:function(e){this.multiple?this.$emit("update:outFiles",e):this.$emit("update:outFiles",e[0])}}},v=m,F=(i("4e79"),i("2877")),w=Object(F["a"])(v,f,p,!1,null,"6dc2e50e",null),y=w.exports,b=i("ecec"),g=i.n(b),k=i("05eb"),C=function(e){function t(){var e;return Object(a["a"])(this,t),e=Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.traceCode=null,e.tempFile=null,e}return Object(r["a"])(t,e),Object(s["a"])(t,[{key:"clickFun",value:function(){this.$emit("on-close")}},{key:"watchtempFile",value:function(e){e&&this.beforeAvatarUpload(e)}},{key:"analysisQrcode",value:function(e){return new Promise((function(t){var i=new Image,n=new FileReader;n.readAsDataURL(e),n.onload=function(e){i.src=e.target.result;var n=document.getElementById("myCanvas"),l=n.getContext("2d");i.onload=function(){l.drawImage(i,0,0,600,600);var e=l.getImageData(0,0,600,600),n={qrcode:"",isqrcode:!0};n.qrcode=g()(e.data,e.width,e.height,{inversionAttempts:"dontInvert"}),null==n.qrcode&&(n.isqrcode=!1),t(n)}}}))}},{key:"beforeAvatarUpload",value:function(e){var t,i;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.analysisQrcode(e));case 2:t=n.sent,console.log(t),i=t.qrcode&&t.qrcode.data,""!==i&&null!=i?this.$emit("on-scan",i):this.$refs.tip.warning("识别失败，请检查二维码是否正确！");case 6:case"end":return n.stop()}}),null,this)}}]),t}(d["d"]);u["a"]([Object(d["e"])("tempFile",{deep:!0})],C.prototype,"watchtempFile",null),C=u["a"]([Object(d["a"])({components:{SelectFile:y,tip:k["default"]}})],C);var O=C,S=O,_=Object(F["a"])(S,n,l,!1,null,"361178de",null);t["default"]=_.exports},fff6:function(e,t,i){}}]);
//# sourceMappingURL=chunk-34200202.9a60c1aa.js.map